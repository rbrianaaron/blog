<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>The Best and Worst States to Have a Heart Attack</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="rbrianaaron">

    <!-- Le styles -->
    <link rel="stylesheet" href="http://rbrianaaron.github.io/blog/theme/css/bootstrap.min.css" type="text/css" />
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
      .tag-1 {
        font-size: 13pt;
      }
      .tag-2 {
        font-size: 10pt;
      }
      .tag-2 {
        font-size: 8pt;
      }
      .tag-4 {
        font-size: 6pt;
     }
    </style>
    <link href="http://rbrianaaron.github.io/blog/theme/css/bootstrap-responsive.min.css" rel="stylesheet">
        <link href="http://rbrianaaron.github.io/blog/theme/css/font-awesome.css" rel="stylesheet">

    <link href="http://rbrianaaron.github.io/blog/theme/css/pygments.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="http://rbrianaaron.github.io/blog/theme/images/favicon.ico">
    <link rel="apple-touch-icon" href="http://rbrianaaron.github.io/blog/theme/images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="http://rbrianaaron.github.io/blog/theme/images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="http://rbrianaaron.github.io/blog/theme/images/apple-touch-icon-114x114.png">

    <link href="http://rbrianaaron.github.io/blog/" type="application/atom+xml" rel="alternate" title="rbrianaaron ATOM Feed" />

  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="http://rbrianaaron.github.io/blog/index.html">rbrianaaron </a>
          <div class="nav-collapse">
            <ul class="nav">
                <li><a href="http://rbrianaaron.github.io/blog/pages/about.html">About</a></li>
                          <li class="divider-vertical"></li>
                  <li class="active">
                    <a href="http://rbrianaaron.github.io/blog/category/reflections.html">
						<i class="icon-folder-open icon-large"></i>Reflections
					</a>
                  </li>
                  <li >
                    <a href="http://rbrianaaron.github.io/blog/category/tutorials.html">
						<i class="icon-folder-open icon-large"></i>Tutorials
					</a>
                  </li>

                          <ul class="nav pull-right">
                                <li><a href="http://rbrianaaron.github.io/blog/archives.html"><i class="icon-th-list"></i>Archives</a></li>
                          </ul>

            </ul>
            <!--<p class="navbar-text pull-right">Logged in as <a href="#">username</a></p>-->
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row">
        <div class="span9" id="content">
<section id="content">
        <article>
                <header>
                        <h1>
                                <a href=""
                                        rel="bookmark"
                                        title="Permalink to The Best and Worst States to Have a Heart Attack">
                                        The Best and Worst States to Have a Heart Attack
                                </a>
                        </h1>
                </header>
                <div class="entry-content">
                <div class="well">
<footer class="post-info">
<span class="label">Date</span>
<abbr class="published" title="2014-12-14T16:59:12.911692-05:00">
        <i class="icon-calendar"></i>Sun 14 December 2014
</abbr>
<span class="label">By</span>
<a href="http://rbrianaaron.github.io/blog/author/rbrianaaron.html"><i class="icon-user"></i>rbrianaaron</a>
<span class="label">Category</span>
<a href="http://rbrianaaron.github.io/blog/category/reflections.html"><i class="icon-folder-open"></i>Reflections</a>.


<span class="label">Tags</span>
	<a href="http://rbrianaaron.github.io/blog/tag/r.html"><i class="icon-tag"></i>R</a>
	<a href="http://rbrianaaron.github.io/blog/tag/coursera.html"><i class="icon-tag"></i>Coursera</a>
</footer><!-- /.post-info -->                </div>
                <p>While taking <a href="https://www.coursera.org/course/rprog">R Programing</a> from Johns Hopkins on Coursera, I was introduced to the Medicare 'Official Hospital Compare Data'.</p>
<p>The <a href="https://data.medicare.gov/data/hospital-compare">Official Hospital Compare Data</a> website states:</p>
<blockquote>
<p>These are the official datasets used on the Medicare.gov Hospital Compare Website provided by the Centers for Medicare &amp; Medicaid Services. 
These data allow you to compare the quality of care at over 4,000 Medicare-certified hospitals across the country.</p>
</blockquote>
<p>I think this means essentially all major hospitals in the United States.</p>
<p>I wanted to use the data to see which states had on average the lowest mortality scores, i.e.the fewest people died, after having a heart attack and which 
states had the highest mortality scores, i.e.the most people died, after having a heart attack. I was also curious if 'law of small numbers' might be at work. 
In small samples, extreme things can happen and their cause is randomness not something exceptional about the group. In other words, will extremely high 
scoring states just be small states with few hospitals (because if they had more hospitals then the additional hospitals would have just brought them closer 
to average).</p>
<p>The data for this analysis come from the csv file titled, 'Out Come of Care Measures 9-29-2014.' I will use the 30-day death (mortality) measures for the analysis.
On the <a href="http://www.medicare.gov/hospitalcompare/data/30-day-measures.html">Medicare.gov/30-day unplanned readmission and death measures page</a>,
the 30-day death (mortality) measures are defined as follows:</p>
<blockquote>
<p>The 30-day death (mortality) measures are estimates of deaths from any cause within 30 days of a hospital admission, for patients hospitalized with one of 
several primary diagnoses. Deaths can be counted in the measures regardless of whether the patient dies while still in the hospital or after discharge. 
CMS chose to measure death within 30 days instead of inpatient deaths to use a more consistent measurement time window because length of hospital stay 
varies across patients and hospitals. Also, mortality over longer time periods (such as 90 days) may have less to do with the care received in the hospital 
and more to do with other complicating illnesses, patients’ own behavior, or care provided to patients after hospital discharge. Hospital Compare reports 
on the following 30-day mortality measures:</p>
<p>30-day death rate for heart attack (acute myocardial infarction [AMI]) patients
30-day death rate for heart failure (HF) patients
30-day death rate for pneumonia patients</p>
</blockquote>
<p>In other words, did you die 30 days after receiving care at a hospital?</p>
<p>One would think though that if you had a heart attack, maybe you were just old or unhealthy, so you would die anyway. The data has been adjusted for this. 
From the <a href="http://www.medicare.gov/hospitalcompare/data/30-day-measures.html">Medicare.gov/30-day unplanned readmission and death measures page</a>, the following
information is given for risk adjustment:</p>
<blockquote>
<p>To make comparison of hospital performance fair and level the playing field, the 30-day unplanned readmission and (death) mortality measures adjust for patient 
characteristics that may make death or unplanned readmission more likely, even if the hospital provided higher quality of care. These characteristics include 
the patient’s age, past medical history, and other diseases or conditions (comorbidities) the patient had when they were admitted that are known to increase 
the patient’s risk of dying or of having an unplanned readmission.</p>
</blockquote>
<p>Okay, enough background. Let's get to the analysis. Here is the code:</p>
<div class="gist">
    <script src='https://gist.github.com/a8a353b66b8cfbdcc0b7.js'></script>
    <noscript>
        <pre><code>beststates <- function(){
        #The function will return the top five and bottom five states for 30 day moratality rates
        #for heart attack patients.
        #
        #Args:
        #  None. The dataset is the OutcomeofCareMeasures.csv file taken fromt the Medicare.gov
        #  website. It can be downloaded at: https://data.medicare.gov/data/hospital-compare
        #
        #Returns:
        #
        #  The top five and bottom five states for the 30 day mortality rates for heart attack
        #  patients and the number of hospitals in that state that had measurements for the
        #  statistics. Hosptials with NA data will be excluded.
        
        #Load the data into the data variable.
        data <- read.csv('OutcomeofCareMeasures2014.csv')
        
        #Coerce factors as neccesary to ensure states are characters and the 30 day stats are numeric.
        data[,2] <- as.character(data[,2])  #Hospital Name
        data[,7] <- as.character(data[,7])  #State
        suppressWarnings(data[,11] <- as.numeric(as.character(data[,11])))  #30-day mortality
        
        #Remove the hospitals that have NA for 30-day mortality rate for heart attack.
        data <- subset(data, !is.na(data[,11]))
        
        #Split data by state, take the mean of the 30-day mortality data, 
        #and return averages to averages vector
        averages <- tapply(data[,11], data[,7], mean)
        states <- dimnames(averages)  #Place state abbreviations in states vector.
        averages <- as.vector(averages)
        
        #Count the hospitals per state and return it to the number_hosptals vector.
        number_hospitals <- tapply(data[,2], data[,7], length)
        number_hospitals <- as.vector(number_hospitals)
        
        #Combine the vectors into a dataframe.
        data_final <- data.frame(states, averages, number_hospitals)
        names(data_final) <- c('States', '30-day mortality heart attack', 'Number of Hospitals')
        
        #Sort the dataframe by the average 30 day mortality scores
        data_final <- data_final[order(data_final[, 2]), ]
        
        #Print out the first and last five states in the dataframe.
        print(head(data_final), 5)
        print(tail(data_final), 5)
                
}</code></pre>
    </noscript>
</div>
<p>Here are the results:</p>
<div class="highlight"><pre>   States 30-day mortality heart attack Number of Hospitals
28     MT                      14.07500                   8
21     MA                      14.17414                  58
9      DE                      14.31667                   6
6      CO                      14.48182                  33
42     RI                      14.48182                  11
47     UT                      14.55625                  16

   States 30-day mortality heart attack Number of Hospitals
51     WA                      15.84545                  44
27     MS                      15.86176                  34
54     WY                      15.90000                   3
3      AR                      16.09375                  32
12     GU                      16.10000                   1
49     VI                      16.30000                   1
</pre></div>


<p>Regarding the best states, Massachusetts is the place to be. It had a very low score with a large number of hospitals. It would be hard to dispute that its score
is not representative. Delaware and Montana might have just gotten lucky.</p>
<p>As to the bottom five, I must admit that I expected to see Mississippi in the data. There also seem a substantial number of hospitals for Washington and Arkansas to 
truly know that neither of those places is a good place to have heart attack. Wyoming, Guam, and the Virgin Islands might have just had unlucky years.</p>
<p>On the whole, I was somewhat surprised at just how tight the range was for the data. </p>
                </div><!-- /.entry-content -->
        </article>
</section>
        </div><!--/span-->

                <div class="span3 well sidebar-nav" id="sidebar">
<ul class="nav nav-list">
<li class="nav-header"><h4><i class="icon-external-link"></i>blogroll</h4></li>
    <li><a href="http://getpelican.com/"><i class="icon-external-link"></i>Pelican</a></li>
    <li><a href="http://python.org/"><i class="icon-external-link"></i>Python.org</a></li>
<li class="nav-header"><h4><i class="icon-home icon-large"></i> social</h4></li>

    <li><a href="https://github.com/rbrianaaron"><i class="icon-Github-sign icon-large"></i>Github</a></li>

<li class="nav-header"><h4><i class="icon-folder-close icon-large"></i>Categories</h4></li>
<li>
<a href="http://rbrianaaron.github.io/blog/category/reflections.html">
    <i class="icon-folder-open icon-large"></i>Reflections
</a>
</li>
<li>
<a href="http://rbrianaaron.github.io/blog/category/tutorials.html">
    <i class="icon-folder-open icon-large"></i>Tutorials
</a>
</li>

<li class="nav-header"><h4><i class="icon-tags icon-large"></i>Tags</h4></li>
<li class="tag-4">
    <a href="http://rbrianaaron.github.io/blog/tag/markdown.html">
        <i class="icon-tag icon-large"></i>markdown
    </a>
</li>
<li class="tag-2">
    <a href="http://rbrianaaron.github.io/blog/tag/coursera.html">
        <i class="icon-tag icon-large"></i>Coursera
    </a>
</li>
<li class="tag-1">
    <a href="http://rbrianaaron.github.io/blog/tag/pelican.html">
        <i class="icon-tag icon-large"></i>pelican
    </a>
</li>
<li class="tag-1">
    <a href="http://rbrianaaron.github.io/blog/tag/r.html">
        <i class="icon-tag icon-large"></i>R
    </a>
</li>
<li class="tag-4">
    <a href="http://rbrianaaron.github.io/blog/tag/statistics.html">
        <i class="icon-tag icon-large"></i>statistics
    </a>
</li>


</ul>        </div><!--/.well -->

      </div><!--/row-->

      <hr>

      <footer>
        <address id="about">
                Proudly powered by <a href="http://pelican.notmyidea.org/">Pelican <i class="icon-external-link"></i></a>,
                                which takes great advantage of <a href="http://python.org">Python <i class="icon-external-link"></i></a>.
        </address><!-- /#about -->

        <p>The theme is from <a href="http://twitter.github.com/bootstrap/">Bootstrap from Twitter <i class="icon-external-link"></i></a>,
                   and <a href="http://fortawesome.github.com/Font-Awesome/">Font-Awesome <i class="icon-external-link"></i></a>, thanks!</p>
      </footer>

    </div><!--/.fluid-container-->



    <!-- Le javascript -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="http://rbrianaaron.github.io/blog/theme/js/jquery-1.7.2.min.js"></script>
    <script src="http://rbrianaaron.github.io/blog/theme/js/bootstrap.min.js"></script>
  </body>
</html>